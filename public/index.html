
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> 
     Good Reads Books

    </title>

    <link rel="icon" href="">
    
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Quicksand|Roboto+Condensed|Ubuntu" rel="stylesheet">
    <!-- Font -->
    <!-- Bootstrap Core CSS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    
    
 
    
    <!-- Latest compiled and minified CSS -->




        <style>
        h1,h2,h3,h4,h5,h6,th,.qs-font *{
          font-family: 'Quicksand', sans-serif;
      }

       table,tr,td, .roboto-font *{
        font-family: 'Roboto Condensed', sans-serif;
      }

      li a, ul a,.navbar-brand .brand-name,.btn,button,.form-control,textarea,select, .ubuntu-font *{
      font-family: 'Ubuntu', sans-serif;
      }

      p,a,div,span,button,form,label,input,textarea,img,.ms-font *{
        font-family: 'Montserrat', sans-serif;
      }

    
      </style>
        
  </head>

  <body>
  
       


<div class="container mb-2 p-4">
    <div class="row">

      <div class="col-md-12">
          <h1 class="display-4 text-secondary"> GoodReads Book Search </h1>
         <hr>

      </div>
  </div>
</div>


<div class="container">
   
    
        

				<div class="row">
          
          <div class="col-md-12">
            


           
		<div class="p-4 bg-light rounded">
			<form action="/api/v1/search" method="get">

					<div class="row">
						
						<div class="col-md-10">
							
							<input type="text" name="q" class="form-control"value="" placeholder="Search Books">
							
						</div>


						<div class="col-md-2">

								<button type="submit" class="btn btn-success ajax-submit btn-block stretch mr-10">
									<i class="fa fa-search" aria-hidden="true"></i></button>
							

						</div>

					</div>		

				</form>
			</div>
			<p><br></p>

      <p class="ajax-message"></p>

      
            <div class="table-responsive-md">
                      <table class="table mb-5 table-striped" id="myTable">
                          <thead>
                              
                            </thead>
                            <tbody class="return-container">
                              
                                  
                                                            
                              
            
                            </tbody>
                      </table>
            </div>
          </div>				
				</div>	
    
  </div>
  <hr>


    <!-- app download -->


    <!-- footer -->
    <footer>
            <div class="container">
                
                <div class="row">
          
                      <div class="col-md-6 col-xs-12">

                          <span class="navbar-text roboto-font text-center mb-2">
                              <p>&copy; 2019 <strong>Good Reads Search</strong></p>
                          </span>
                       
                      </div>
                  
                    
                    
                  </div>

            </div>
    </div>

      <!-- /credit -->
    </footer>
    <!-- /footer -->


 <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <!-- jQuery library --> <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" ></script>
    
     <script src="http://malsup.github.com/jquery.form.js"></script>
    <script>
function  send_form_data(form_object,load_container, return_container,load_selector)
 {
        form_object.ajaxSubmit({
                        dataType: 'json',
                       data: form_object.serialize,
                       beforeSend: function()
                                  {
                                     $(load_container).html(load_selector);
                                   },
                       complete:function(){ },
                       success:function(data)
                              {
                                $(load_container).html(' ');
                                var json_string = JSON.stringify(data.response.results.work);
                                //console.log(json_string);

                                var empObj  = data.response.results.work;
                                var return_html = '';

                                data.response.results.work.forEach(function(index) {

                                  var id = index.id.$t;
                                  var title = index.best_book.title;
                                  var author = index.best_book.author.name;
                                  var thumbnail = index.best_book.small_image_url;
                                  var pub_date = index.original_publication_day.$t + ' / ' + 
                                  index.original_publication_month.$t + ' / '
                                   + index.original_publication_year.$t;

                                 return_html += '<tr style="vertical-align: middle">'+
                                '<td class="text-dark">'+id+'</td>'+
                                '<td>'+
                                    '<img src="'+thumbnail+'" alt="" width="80">'+
                                  '</td>'+
                                '<td class="text-dark" style="width:33%">'+title+'</td>'+
                                
                                '<td style="color:seagreen"><strong>'+author+'</strong></td>'+
                                '<td>'+pub_date+'</td>'+
    
                              '</tr>';


                                 });

                                 var thead = '<tr>   <th>ID</th> <th>Photo</th> <th>title</th>   <th>Author</th><th>Date Added</th>  </tr>';


                                 $('thead').html(thead);
                                $(return_container).html(return_html);
                                
                                console.log(json_string);



                              },

                       error:function()
                              {
                                $(load_container).html(' ');

                                   $(return_container).html(
                                   '<tr><td colspan="5"><center><div class="alert alert-danger"><span class="alert-close">&times;</span>\n\
                                    <b>internal error:</b>Please check your internet connection and try again</div></center></td></tr>');
                               }

                      });


 }

    $(function () {
    var $loading_circle = '<center><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></center>';
   
    $('body').on('click','.ajax-submit',
    function (e)
    {
      var $form = $(this).parents('form');
       e.preventDefault();
      send_form_data($form, '.ajax-message','.return-container', $loading_circle);


    });
   });
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    
  </body>
</html>
